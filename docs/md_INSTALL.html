<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rpc.hpp: Installation Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rpc.hpp
   &#160;<span id="projectnumber">0.6.2</span>
   </div>
   <div id="projectbrief">Simple RPC Header-Only Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md31"></a>
Header Installation</h1>
<p>As <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> is a header-only library, you only need to install the header files to your system.</p>
<p>This can be done by cloning the project's <code>main</code> branch or downloading it as an archive from GitHub. Once you have the files, you may copy the contents of the <code>include</code> directory to your system or user's include path, or to the relevant place in your project's directory.</p>
<h1><a class="anchor" id="autotoc_md32"></a>
Installing With CMake</h1>
<p>You may also install the headers by cloning the repository and running the following commands:</p>
<div class="fragment"><div class="line">$ mkdir build</div>
</div><!-- fragment --><div class="fragment"><div class="line">$ cmake -B build -D BUILD_ADAPTER_BOOST_JSON=ON -D BUILD_ADAPTER_NJSON=ON -D BUILD_ADAPTER_RAPIDJSON=ON</div>
</div><!-- fragment --><div class="fragment"><div class="line">$ cmake --install build</div>
</div><!-- fragment --><p>CMake version 3.16 or newer is required for this method, see below for instructions to install CMake if it is not already installed.</p>
<h1><a class="anchor" id="autotoc_md33"></a>
Building and Testing the Project</h1>
<p>If you are looking to contribute to <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code>, or just want to run the tests/benchmarks, you will need to make sure that you can build the project and its test suite.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
Setting Up Your Environment</h2>
<p>While <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> is a header-only library, the project relies on using a buildsystem to perform certain tasks. It is therefore required that CMake (version 3.16 or newer) is installed on your machine and available on your <code>$PATH</code> to build the project.</p>
<p>Additionally, <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> requires at least one C++ compiler that fully supports C++17 or newer:</p>
<p><b>Linux/macOS/BSD</b></p>
<ul>
<li><code>gcc</code> &gt;= 7</li>
<li><code>clang</code> &gt;= 5</li>
</ul>
<p><b>Windows</b></p>
<ul>
<li>MSVC (<code>cl.exe</code>) &gt;= 19.14 (Visual Studio 2017 15.7 or newer)</li>
</ul>
<p>On Windows you will have to install Visual Studio 2017 or newer. You may install the full IDE with the C++ "Workload" selected or simply install the <a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019">standalone build tools</a> instead.</p>
<p>These development dependencies can be installed in the following ways, depending on your operating system (replace <code>gcc</code> w/ <code>clang</code> if desired):</p>
<p><b>Arch / Manjaro</b></p>
<div class="fragment"><div class="line">$ sudo pacman -S gcc cmake ninja</div>
</div><!-- fragment --><p><b>CentOS 7 / RHEL 7</b></p>
<div class="fragment"><div class="line">$ sudo dnf install devtoolset-10-gcc cmake ninja-build</div>
</div><!-- fragment --><p><b>CentOS 8+ / Fedora 33+ / RHEL 8+</b></p>
<div class="fragment"><div class="line">$ sudo dnf install gcc cmake ninja-build</div>
</div><!-- fragment --><p><b>Debian 10+ / PopOS/Ubuntu 18.04+</b></p>
<div class="fragment"><div class="line">$ sudo apt install gcc cmake ninja-build</div>
</div><!-- fragment --><p><b>FreeBSD 12+</b></p>
<div class="fragment"><div class="line"># pkg install cmake ninja</div>
</div><!-- fragment --><p><b>OpenSUSE / SLES</b></p>
<div class="fragment"><div class="line">$ sudo zypper install gcc cmake ninja</div>
</div><!-- fragment --><p><b>Windows - Chocolatey</b></p>
<div class="fragment"><div class="line">&gt; choco install cmake ninja</div>
</div><!-- fragment --><p><b>Windows - Scoop</b></p>
<div class="fragment"><div class="line">&gt; scoop install cmake ninja</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md35"></a>
Library Dependencies</h3>
<p>While not strictly <em>required</em>, the adapter headers are considered a core part of the library and therefore should build without issue after any code change, and should be tested.</p>
<p>(NOTE: if the community ends up creating a lot of adapters, this may change)</p>
<hr  />
<p>The libraries needed to build the current adapters are:</p>
<ul>
<li><a href="https://github.com/nlohmann/json">nlohmann/json</a> &gt;= 3.9.0</li>
<li><a href="https://github.com/tencent/rapidjson">rapidjson</a> &gt;= 1.1.0</li>
<li><a href="https://www.boost.org/doc/libs/1_77_0/libs/json/doc/html/index.html">Boost.JSON</a> &gt;= 1.75.0</li>
</ul>
<p>For building the unit tests, there are additional libraries required:</p>
<ul>
<li><a href="http://think-async.com/Asio">asio</a> &gt;= 1.14</li>
<li><a href="https://github.com/onqtam/doctest">doctest</a> &gt;= 2.4</li>
</ul>
<p>Building the benchmarks also requires one library:</p>
<ul>
<li><a href="https://github.com/catchorg/Catch2">catch2</a> &gt;= 2.11 &lt; 3.0</li>
</ul>
<p>These dependencies can be installed in one of three ways:</p>
<ol type="1">
<li>Installing manually from source, binary, or system package manager</li>
<li>Install via <a href="https://github.com/Microsoft/vcpkg">vcpkg</a></li>
<li>Auto-install via <a href="https://conan.io">Conan</a></li>
</ol>
<h4><a class="anchor" id="autotoc_md37"></a>
Setting up &lt;tt&gt;vcpkg&lt;/tt&gt;</h4>
<ol type="1">
<li>In a terminal, navigate to the location where <code>vcpkg</code> should be installed (<code>$HOME</code> is fine for most)</li>
<li>Clone the <code>vcpkg</code> project and enter the source directory</li>
</ol>
<div class="fragment"><div class="line">$ git clone https://github.com/Microsoft/vcpkg</div>
</div><!-- fragment --><div class="fragment"><div class="line">$ cd vcpkg</div>
</div><!-- fragment --><ol type="1">
<li>"Bootstrap" <code>vcpkg</code></li>
</ol>
<p><b>Linux/macOS/BSD</b></p>
<div class="fragment"><div class="line">$ ./bootstrap-vcpkg.sh</div>
</div><!-- fragment --><p><b>Windows</b></p>
<div class="fragment"><div class="line">&gt; .\bootstrap-vcpkg.bat</div>
</div><!-- fragment --><ol type="1">
<li>Add <code>vcpkg</code> to your path (optional)</li>
<li>Integrate your vcpkg installation into CMake/Visual Studio</li>
</ol>
<div class="fragment"><div class="line">$ vcpkg integrate install</div>
</div><!-- fragment --><ol type="1">
<li>Install dependencies</li>
</ol>
<div class="fragment"><div class="line">$ vcpkg install catch2 doctest nlohmann-json rapidjson boost-json</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md38"></a>
Setting up Conan</h4>
<ol type="1">
<li>Make sure you have Python 3 and pip installed.<ul>
<li>It is recommended to install and use <code>pipx</code> rather than <code>pip</code> for installing applications like Conan, however</li>
</ul>
</li>
<li>Install Conan<ul>
<li>With pipx (preferred)</li>
</ul>
</li>
</ol>
<div class="fragment"><div class="line">$ pipx install conan</div>
</div><!-- fragment --><ul>
<li>With pip</li>
</ul>
<div class="fragment"><div class="line">$ pip install --user conan</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
Building the Project</h2>
<ol type="1">
<li>Enter the top-level directory of the project</li>
<li>Create the build directory</li>
</ol>
<div class="fragment"><div class="line">$ mkdir build</div>
</div><!-- fragment --><ol type="1">
<li>Configure the project</li>
</ol>
<div class="fragment"><div class="line">$ cmake -B build -G Ninja -D BUILD_ADAPTER_BITSERY -D BUILD_ADAPTER_BOOST_JSON=ON -D BUILD_ADAPTER_NJSON=ON -D BUILD_ADAPTER_RAPIDJSON=ON -D BUILD_TESTING=ON</div>
</div><!-- fragment --><p>NOTE: The above command can be altered based on your needs:</p>
<ul>
<li>In this example, the "Ninja" generator is used as it is fast, but <code>-G Ninja</code> may be omitted to use the system default make system</li>
<li>With this example, all adapters are to be built. By omitting one or more, they will not be built (example: <code>-D BUILD_ADAPTER_BOOST_JSON=ON</code> could be omitted or set to <code>=OFF</code>)<ul>
<li><b>NOTE:</b> <code>BUILD_ADAPTER_NJSON</code> is required for testing</li>
</ul>
</li>
<li>If using Conan to auto-install dependencies, make sure to set its option (add <code>-D DEPENDS_CONAN=ON</code>)</li>
<li>If using vcpkg to manage dependencies, make sure to set its option (add <code>-D DEPENDS_VCPKG=ON</code>)<ul>
<li>You may also need to provide CMake with a vcpkg toolchain file: (<code>-D CMAKE_TOOLCHAIN_FILE="/path/to/vcpkg/scripts/buildsystems/vcpkg.cmake"</code>)</li>
</ul>
</li>
<li>See <a href="#build-options">Build Options</a> for more details on these and other configuration options</li>
</ul>
<ol type="1">
<li>Build the project</li>
</ol>
<div class="fragment"><div class="line">$ cmake --build build</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md40"></a>
Build Options</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>BUILD_ADAPTER_BITSERY</code>   </td><td class="markdownTableBodyNone">Build the adapter for Bitsery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>BUILD_ADAPTER_BOOST_JSON</code>   </td><td class="markdownTableBodyNone">Build the adapter for Boost.JSON    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>BUILD_ADAPTER_NJSON</code>   </td><td class="markdownTableBodyNone">Build the adapter for nlohmann/json    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>BUILD_ADAPTER_RAPIDJSON</code>   </td><td class="markdownTableBodyNone">Build the adapter for rapidjson    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>BUILD_BENCHMARK</code>   </td><td class="markdownTableBodyNone">Build the benchmarking suite    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>BUILD_EXAMPLES</code>   </td><td class="markdownTableBodyNone">Build the examples    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>BUILD_TESTING</code>   </td><td class="markdownTableBodyNone">Build the testing tree    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CODE_COVERAGE</code>   </td><td class="markdownTableBodyNone">Enable coverage reporting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DEPENDS_CONAN</code>   </td><td class="markdownTableBodyNone">Use Conan to manage C/C++ dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DEPENDS_VCPKG</code>   </td><td class="markdownTableBodyNone">User vcpkg to manage C/C++ dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GENERATE_DOXYGEN</code>   </td><td class="markdownTableBodyNone">Generate Doxygen documentation from comments   </td></tr>
</table>
<p>NOTE:</p>
<ul>
<li>Only one or neither of <code>DEPENDS_CONAN</code> and <code>DEPENDS_VCPKG</code> may be defined</li>
<li><code>BUILD_BENCHMARK</code> requires <code>BUILD_TESTING</code></li>
<li><code>GENERATE_DOXYGEN</code> and <code>CODE_COVERAGE</code> should only be defined when doing a documentation or coverage build, respectively</li>
</ul>
<h2><a class="anchor" id="autotoc_md41"></a>
Running Tests</h2>
<p>To build the tests, make sure your build environment is set up. Also make sure that the <code>BUILD_TESTING</code> option is set in your <code>CMakeCache.txt</code>.</p>
<p><b>NOTE:</b> The test server will have to be running for the tests to succeed. You could run it in a separate terminal session, or add <code>tests/test_server &amp;</code> at the beginning of the <code>ctest</code> command below. The tests will successfully kill the serer on completion.</p>
<p>From the project <em>build</em> directory run:</p>
<div class="fragment"><div class="line">$ ctest --test-dir tests</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
