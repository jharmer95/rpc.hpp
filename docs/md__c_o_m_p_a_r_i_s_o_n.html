<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rpc.hpp: Comparison of RPC Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rpc.hpp
   &#160;<span id="projectnumber">0.7.1</span>
   </div>
   <div id="projectbrief">Simple RPC Header-Only Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Comparison of RPC Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md13"></a>
rpc.hpp Adapter Comparison</h1>
<p>For relative performance benchmarks for the adapters of <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> see <a href="#performance">below</a></p>
<h1><a class="anchor" id="autotoc_md14"></a>
Alternatives for Consideration</h1>
<h2><a class="anchor" id="autotoc_md15"></a>
rpclib</h2>
<h2><a class="anchor" id="autotoc_md16"></a>
gRPC</h2>
<h1><a class="anchor" id="autotoc_md17"></a>
Comparison to Alternatives</h1>
<h2><a class="anchor" id="autotoc_md18"></a>
Features</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">feature   </th><th class="markdownTableHeadNone"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code>   </th><th class="markdownTableHeadNone"><code>rpclib</code>   </th><th class="markdownTableHeadNone"><code>gRPC</code>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Get result of remote function call   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:heavy_check_mark:    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Bind reference parameters of RPC   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:x:   </td><td class="markdownTableBodyNone">:x:    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Call RPCs without headers from the server   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:x:    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Doesn't require external compilation   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:x:    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">No external dependencies (outside of networking)   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:x: <br  />
 abseil, c-ares, <br  />
 protobuf, openssl, re2, zlib    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Header-only   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:x:   </td><td class="markdownTableBodyNone">:x:    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Adaptable via "plugins"   </td><td class="markdownTableBodyNone">:heavy_check_mark:   </td><td class="markdownTableBodyNone">:x:   </td><td class="markdownTableBodyNone">:x:    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Compile-time type safety   </td><td class="markdownTableBodyNone">:eight_spoked_asterisk: <br  />
 (if using shared headers and <code>call_header_func</code>)   </td><td class="markdownTableBodyNone">:x:   </td><td class="markdownTableBodyNone">:heavy_check_mark:    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Serialization method(s)   </td><td class="markdownTableBodyNone">Any provided by adapters (currently: JSON, bitsery)   </td><td class="markdownTableBodyNone">msgpack   </td><td class="markdownTableBodyNone">flatbuffers, protobuffers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RPC/IPC methods supported   </td><td class="markdownTableBodyNone">TCP, Websockets, DLL, shared memory, and more... <br  />
 (Just implement the client and server interfaces to pass messages)   </td><td class="markdownTableBodyNone">TCP only   </td><td class="markdownTableBodyNone">HTTP only   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md19"></a>
Performance</h2>
<p>The following tests were performed using nanobench. In each case, the call is done over a TCP socket on the same machine (inter-process call) to reduce noise from network traffic.</p>
<p>For each of these tests, server-side caching was <em>disabled</em> for <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code>. To see the additional benefits of enabling the function cache, see the <a href="#function-caching">caching</a> section.</p>
<p>Each "op" is a call to the defined function on the server.</p>
<h3><a class="anchor" id="autotoc_md20"></a>
Fibonacci</h3>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">uint64_t Fibonacci(uint64_t n)</div>
<div class="line">{</div>
<div class="line">    return number &lt; 2 ? 1 : Fibonacci(number - 1) + Fibonacci(number - 2);</div>
<div class="line">}</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">relative   </th><th class="markdownTableHeadRight">ns/op   </th><th class="markdownTableHeadRight">op/s   </th><th class="markdownTableHeadRight">err%   </th><th class="markdownTableHeadRight">total   </th><th class="markdownTableHeadLeft">RPC Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">100.0%   </td><td class="markdownTableBodyRight">131,292.32   </td><td class="markdownTableBodyRight">7,616.59   </td><td class="markdownTableBodyRight">1.1%   </td><td class="markdownTableBodyRight">3.25   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, njson)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">105.0%   </td><td class="markdownTableBodyRight">125,005.46   </td><td class="markdownTableBodyRight">7,999.65   </td><td class="markdownTableBodyRight">2.6%   </td><td class="markdownTableBodyRight">3.14   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, rapidjson)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">110.6%   </td><td class="markdownTableBodyRight">118,692.83   </td><td class="markdownTableBodyRight">8,425.11   </td><td class="markdownTableBodyRight">1.6%   </td><td class="markdownTableBodyRight">2.90   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, Boost.JSON)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">127.8%   </td><td class="markdownTableBodyRight">102,718.72   </td><td class="markdownTableBodyRight">9,735.32   </td><td class="markdownTableBodyRight">1.2%   </td><td class="markdownTableBodyRight">2.48   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, bitsery)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">61.9%   </td><td class="markdownTableBodyRight">212,014.89   </td><td class="markdownTableBodyRight">4,716.65   </td><td class="markdownTableBodyRight">0.8%   </td><td class="markdownTableBodyRight">5.14   </td><td class="markdownTableBodyLeft"><code>rpclib</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">74.8%   </td><td class="markdownTableBodyRight">175,597.70   </td><td class="markdownTableBodyRight">5,694.84   </td><td class="markdownTableBodyRight">1.0%   </td><td class="markdownTableBodyRight">4.23   </td><td class="markdownTableBodyLeft"><code>gRPC</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md21"></a>
HashComplex</h3>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">struct ComplexObject</div>
<div class="line">{</div>
<div class="line">    int id{};</div>
<div class="line">    std::string name{};</div>
<div class="line">    bool flag1{};</div>
<div class="line">    bool flag2{};</div>
<div class="line">    std::array&lt;uint8_t, 12&gt; vals{};</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">std::string HashComplex(ComplexObject cx)</div>
<div class="line">{</div>
<div class="line">    std::stringstream hash;</div>
<div class="line"> </div>
<div class="line">    if (cx.flag1)</div>
<div class="line">    {</div>
<div class="line">        std::reverse(cx.vals.begin(), cx.vals.end());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    for (size_t i = 0; i &lt; cx.name.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        const int acc = cx.flag2 ? cx.name[i] + cx.vals[i % 12] : cx.name[i] - cx.vals[i % 12];</div>
<div class="line">        hash &lt;&lt; std::hex &lt;&lt; acc;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return hash.str();</div>
<div class="line">}</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">relative   </th><th class="markdownTableHeadRight">ns/op   </th><th class="markdownTableHeadRight">op/s   </th><th class="markdownTableHeadRight">err%   </th><th class="markdownTableHeadRight">total   </th><th class="markdownTableHeadLeft">RPC Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">100.0%   </td><td class="markdownTableBodyRight">135,644.92   </td><td class="markdownTableBodyRight">7,372.19   </td><td class="markdownTableBodyRight">2.2%   </td><td class="markdownTableBodyRight">3.30   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, njson)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">125.8%   </td><td class="markdownTableBodyRight">107,826.49   </td><td class="markdownTableBodyRight">9,274.16   </td><td class="markdownTableBodyRight">2.3%   </td><td class="markdownTableBodyRight">2.58   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, rapidjson)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">118.8%   </td><td class="markdownTableBodyRight">114,175.54   </td><td class="markdownTableBodyRight">8,758.44   </td><td class="markdownTableBodyRight">1.3%   </td><td class="markdownTableBodyRight">2.81   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, Boost.JSON)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">181.5%   </td><td class="markdownTableBodyRight">74,727.74   </td><td class="markdownTableBodyRight">13,381.91   </td><td class="markdownTableBodyRight">2.7%   </td><td class="markdownTableBodyRight">1.86   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, bitsery)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">72.7%   </td><td class="markdownTableBodyRight">186,623.39   </td><td class="markdownTableBodyRight">5,358.38   </td><td class="markdownTableBodyRight">2.2%   </td><td class="markdownTableBodyRight">4.48   </td><td class="markdownTableBodyLeft"><code>rpclib</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">86.7%   </td><td class="markdownTableBodyRight">156,521.63   </td><td class="markdownTableBodyRight">6,388.89   </td><td class="markdownTableBodyRight">2.6%   </td><td class="markdownTableBodyRight">3.78   </td><td class="markdownTableBodyLeft"><code>gRPC</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md22"></a>
StdDev</h3>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">double StdDev(double n1, double n2, double n3, double n4, double n5,</div>
<div class="line">    double n6, double n7, double n8, double n9, double n10)</div>
<div class="line">{</div>
<div class="line">    const auto avg = Average(</div>
<div class="line">        n1 * n1, n2 * n2, n3 * n3, n4 * n4, n5 * n5, n6 * n6,</div>
<div class="line">        n7 * n7, n8 * n8, n9 * n9, n10 * n10);</div>
<div class="line"> </div>
<div class="line">    return std::sqrt(avg);</div>
<div class="line">}</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">relative   </th><th class="markdownTableHeadRight">ns/op   </th><th class="markdownTableHeadRight">op/s   </th><th class="markdownTableHeadRight">err%   </th><th class="markdownTableHeadRight">total   </th><th class="markdownTableHeadLeft">RPC Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">100.0%   </td><td class="markdownTableBodyRight">112,864.05   </td><td class="markdownTableBodyRight">8,860.22   </td><td class="markdownTableBodyRight">2.8%   </td><td class="markdownTableBodyRight">2.82   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, njson)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">155.0%   </td><td class="markdownTableBodyRight">72,815.62   </td><td class="markdownTableBodyRight">13,733.32   </td><td class="markdownTableBodyRight">0.9%   </td><td class="markdownTableBodyRight">1.80   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, rapidjson)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">148.5%   </td><td class="markdownTableBodyRight">75,994.39   </td><td class="markdownTableBodyRight">13,158.87   </td><td class="markdownTableBodyRight">1.0%   </td><td class="markdownTableBodyRight">1.87   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, Boost.JSON)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">189.4%   </td><td class="markdownTableBodyRight">59,586.13   </td><td class="markdownTableBodyRight">16,782.43   </td><td class="markdownTableBodyRight">2.7%   </td><td class="markdownTableBodyRight">1.45   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, bitsery)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">66.4%   </td><td class="markdownTableBodyRight">169,877.21   </td><td class="markdownTableBodyRight">5,886.60   </td><td class="markdownTableBodyRight">2.0%   </td><td class="markdownTableBodyRight">4.17   </td><td class="markdownTableBodyLeft"><code>rpclib</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">89.1%   </td><td class="markdownTableBodyRight">126,717.13   </td><td class="markdownTableBodyRight">7,891.59   </td><td class="markdownTableBodyRight">3.2%   </td><td class="markdownTableBodyRight">3.08   </td><td class="markdownTableBodyLeft"><code>gRPC</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md23"></a>
AverageContainer</h3>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">template&lt;typename T&gt;</div>
<div class="line">double AverageContainer(const std::vector&lt;T&gt;&amp; vec)</div>
<div class="line">{</div>
<div class="line">    const double sum = std::accumulate(vec.begin(), vec.end(), 0.00);</div>
<div class="line">    return sum / static_cast&lt;double&gt;(vec.size());</div>
<div class="line">}</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">relative   </th><th class="markdownTableHeadRight">ns/op   </th><th class="markdownTableHeadRight">op/s   </th><th class="markdownTableHeadRight">err%   </th><th class="markdownTableHeadRight">total   </th><th class="markdownTableHeadLeft">RPC Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">100.0%   </td><td class="markdownTableBodyRight">116,881.56   </td><td class="markdownTableBodyRight">8,555.67   </td><td class="markdownTableBodyRight">4.8%   </td><td class="markdownTableBodyRight">2.88   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, njson)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">149.0%   </td><td class="markdownTableBodyRight">78,432.09   </td><td class="markdownTableBodyRight">12,749.88   </td><td class="markdownTableBodyRight">4.9%   </td><td class="markdownTableBodyRight">2.00   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, rapidjson)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">133.5%   </td><td class="markdownTableBodyRight">87,575.67   </td><td class="markdownTableBodyRight">11,418.70   </td><td class="markdownTableBodyRight">3.0%   </td><td class="markdownTableBodyRight">2.11   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, Boost.JSON)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">176.0%   </td><td class="markdownTableBodyRight">66,399.04   </td><td class="markdownTableBodyRight">15,060.46   </td><td class="markdownTableBodyRight">1.8%   </td><td class="markdownTableBodyRight">1.64   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, bitsery)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">67.0%   </td><td class="markdownTableBodyRight">174,553.87   </td><td class="markdownTableBodyRight">5,728.89   </td><td class="markdownTableBodyRight">3.8%   </td><td class="markdownTableBodyRight">4.30   </td><td class="markdownTableBodyLeft"><code>rpclib</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">91.5%   </td><td class="markdownTableBodyRight">127,777.78   </td><td class="markdownTableBodyRight">7,826.09   </td><td class="markdownTableBodyRight">3.7%   </td><td class="markdownTableBodyRight">3.19   </td><td class="markdownTableBodyLeft"><code>gRPC</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md24"></a>
Sequential</h3>
<p>The "Sequential" benchmark aims to replicate real-world behavior where the input of one function might depend on the result of another:</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">// Server</div>
<div class="line">std::vector&lt;uint64_t&gt; GenRandInts(const uint64_t min, const uint64_t max, const size_t sz)</div>
<div class="line">{</div>
<div class="line">    std::vector&lt;uint64_t&gt; vec;</div>
<div class="line">    vec.reserve(sz);</div>
<div class="line"> </div>
<div class="line">    for (size_t i = 0; i &lt; sz; ++i)</div>
<div class="line">    {</div>
<div class="line">        vec.push_back(static_cast&lt;uint64_t&gt;(std::rand()) % (max - min + 1) + min);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return vec;</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line"> {C++}</div>
<div class="line">// Client</div>
<div class="line">std::vector&lt;uint64_t&gt; vec = SomeRPCMethod(&quot;GenRandInts&quot;, 5, 30, 1&#39;000);</div>
<div class="line"> </div>
<div class="line">for (auto&amp; val : vec)</div>
<div class="line">{</div>
<div class="line">    uint64_t val = SomeRPCMethod(&quot;Fibonacci&quot;, val);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">double avg = SomeRPCMethod(&quot;AverageContainer&quot;, vec);</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">relative   </th><th class="markdownTableHeadRight">ns/op   </th><th class="markdownTableHeadRight">op/s   </th><th class="markdownTableHeadRight">err%   </th><th class="markdownTableHeadRight">total   </th><th class="markdownTableHeadLeft">RPC Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">100.0%   </td><td class="markdownTableBodyRight">603,869,933.33   </td><td class="markdownTableBodyRight">1.66   </td><td class="markdownTableBodyRight">1.1%   </td><td class="markdownTableBodyRight">20.76   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, njson)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">107.3%   </td><td class="markdownTableBodyRight">562,596,833.33   </td><td class="markdownTableBodyRight">1.78   </td><td class="markdownTableBodyRight">2.3%   </td><td class="markdownTableBodyRight">19.03   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, rapidjson)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">107.6%   </td><td class="markdownTableBodyRight">561,025,000.00   </td><td class="markdownTableBodyRight">1.78   </td><td class="markdownTableBodyRight">2.2%   </td><td class="markdownTableBodyRight">19.14   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, Boost.JSON)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">110.8%   </td><td class="markdownTableBodyRight">545,018,366.67   </td><td class="markdownTableBodyRight">1.83   </td><td class="markdownTableBodyRight">2.2%   </td><td class="markdownTableBodyRight">18.59   </td><td class="markdownTableBodyLeft"><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a> (asio::tcp, bitsery)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">89.6%   </td><td class="markdownTableBodyRight">673,604,233.33   </td><td class="markdownTableBodyRight">1.48   </td><td class="markdownTableBodyRight">2.2%   </td><td class="markdownTableBodyRight">23.03   </td><td class="markdownTableBodyLeft"><code>rpclib</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">86.9%   </td><td class="markdownTableBodyRight">695,083,500.00   </td><td class="markdownTableBodyRight">1.44   </td><td class="markdownTableBodyRight">2.1%   </td><td class="markdownTableBodyRight">23.45   </td><td class="markdownTableBodyLeft"><code>gRPC</code>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md25"></a>
Summary</h1>
<p><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> can offer some advantages over other RPC solutions, namely in its flexibility, ease of use, and relative performance.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Compared to rpclib</h2>
<p><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> is very similar in design to rpclib. Both provide a way to serialize user types and package functions and a simple interface to both bind function calls to the server and call them from a client.</p>
<p>The main advantage <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> provides over rpclib is in its flexibility. While rpclib focuses on its <code>rpc-msgpack</code> implementation, <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> provides a fairly generic way to package functions, allowing for the use of different serialization techniques and formats.</p>
<p>Additionally, rpclib only has one transport method: using <code>asio</code> to pass messages via TCP. <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> allows servers to be customized to use any transport method the developer wants, including virtual transport via something like a DLL boundary or shared memory.</p>
<p><code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> also provides a pretty significant performance improvement over rpclib, even without caching enabled (between 10-38% faster in testing when using nlohmann-json, sometimes over 100% faster when using bitsery).</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Compared to gRPC</h2>
<p>While gRPC provides a very robust client/server design and some impressive tooling to create safe interfaces across <em>many</em> different programming languages, it can also be cumbersome to use and has a pretty restrictive interface (mostly by design).</p>
<p>Unlike gRPC, <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> does not require external dependencies or building large libraries and does not require an additional compilation step like gRPC does with its protocol buffers. It can also be used with different message passing techniques, where gRPC is stuck with HTTP/2 requests.</p>
<p>For many, having the stability and proven performance (not to mention the support of Google) that comes with a complete solution like gRPC may be ideal in a production setting. At this time, <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> cannot compete with the development resources that gRPC has.</p>
<p>With that being said, the flexibility of <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> can be an advantage. Because <code><a class="el" href="rpc_8hpp.html" title="Header-only library for serialized RPC usage.">rpc.hpp</a></code> does not provide a default server implementation, developers are free to create their own robust system using other proven libraries and frameworks. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
